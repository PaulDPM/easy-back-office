{"ast":null,"code":"import _slicedToArray from\"/home/runner/work/galadmin/galadmin/src/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext,useEffect}from\"react\";import{Link,useHistory,useLocation}from\"react-router-dom\";import{ConfigContext}from'../contexts/ConfigContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SidebarItemIconAndLabel=function SidebarItemIconAndLabel(_ref){var view=_ref.view;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{class:\"sidebarIcon\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-\".concat(view.icon||\"square\")})}),/*#__PURE__*/_jsx(\"div\",{class:\"sidebarLabel\",children:view.label})]});};export default(function(_ref2){var logout=_ref2.logout;var location=useLocation();var config=useContext(ConfigContext);var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMenu=_useState2[0],setShowMenu=_useState2[1];var toggleMenu=function toggleMenu(){return setShowMenu(!showMenu);};useEffect(function(){var closeMenu=function closeMenu(e){if(!e.target.closest('.menu')&&!e.target.closest('.menuButton')){setShowMenu(false);}};document.addEventListener('click',closeMenu);return function(){return document.removeEventListener('click',closeMenu);};},[]);console.log({showMenu:showMenu});return/*#__PURE__*/_jsxs(\"div\",{class:\"sidebar\",children:[config.logo?/*#__PURE__*/_jsx(\"img\",{src:config.logo,class:\"logo\"}):null,/*#__PURE__*/_jsx(\"div\",{class:\"sidebarTitle\",children:config.name}),/*#__PURE__*/_jsx(\"div\",{class:\"sidebarSubtitle\",children:\"Back-office\"}),config.views.filter(function(view){return!view.hidden;}).map(function(view,i){if(view.type===\"link\"){return/*#__PURE__*/_jsx(\"a\",{href:view.src,children:/*#__PURE__*/_jsx(\"div\",{class:\"sidebarItem\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(SidebarItemIconAndLabel,{view:view})})})},i);}else if(view.type===\"iframe\"){var isActive=location.pathname===\"/iframe/\".concat(i);return/*#__PURE__*/_jsx(Link,{to:\"/iframe/\".concat(i),children:/*#__PURE__*/_jsx(\"div\",{class:\"sidebarItem \".concat(isActive?\"active\":\"\"),children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(SidebarItemIconAndLabel,{view:view})})})},i);}else if(view.type===\"custom\"){var _isActive=location.pathname===\"/customView/\".concat(i);return/*#__PURE__*/_jsx(Link,{to:\"/customView/\".concat(i),children:/*#__PURE__*/_jsx(\"div\",{class:\"sidebarItem \".concat(_isActive?\"active\":\"\"),children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(SidebarItemIconAndLabel,{view:view})})})},i);}else if(view.type===\"table\"){var _isActive2=location.pathname===\"/records/\".concat(i)||location.pathname===\"/createRecord/\".concat(i)||location.pathname.startsWith(\"/record/\".concat(i,\"/\"))||location.pathname.startsWith(\"/editRecord/\".concat(i,\"/\"));return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return history.push(\"/records/\".concat(i));},children:/*#__PURE__*/_jsxs(\"div\",{class:\"sidebarItem \".concat(_isActive2?\"active\":\"\"),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{class:\"notificationWrapper\"}),/*#__PURE__*/_jsx(SidebarItemIconAndLabel,{view:view})]}),view.subviews?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{class:\"subviewsSeparator\"}),view.subviews.map(function(subview,j){var isActive=location.pathname==\"/records/\".concat(i,\"/\").concat(j);return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(e){history.push(\"/records/\".concat(i,\"/\").concat(j));e.stopPropagation();},children:/*#__PURE__*/_jsxs(\"div\",{\"data-subview-index\":j,class:isActive?\"active\":\"\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"notificationWrapperForSubview\"}),subview.label]})});})]}):null]})},i);}}),!config.hideBranding?/*#__PURE__*/_jsxs(\"div\",{class:\"sidebarBranding\",children:[\"Made with \",/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-heart\"}),\" by Galadrim\"]}):null,/*#__PURE__*/_jsxs(\"div\",{class:\"menu\",onClick:toggleMenu,children:[/*#__PURE__*/_jsx(\"div\",{class:\"menuButton\",children:/*#__PURE__*/_jsx(\"i\",{class:\"far fa-ellipsis-v\"})}),showMenu?/*#__PURE__*/_jsx(\"div\",{class:\"menuOptions\",children:/*#__PURE__*/_jsxs(\"div\",{onClick:logout,class:\"menuOption\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"far fa-sign-out\"}),\" Se d\\xE9connecter\"]})}):null]})]});});","map":{"version":3,"names":["React","useState","useContext","useEffect","Link","useHistory","useLocation","ConfigContext","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SidebarItemIconAndLabel","_ref","view","children","class","concat","icon","label","_ref2","logout","location","config","history","_useState","_useState2","_slicedToArray","showMenu","setShowMenu","toggleMenu","closeMenu","e","target","closest","document","addEventListener","removeEventListener","console","log","logo","src","name","views","filter","hidden","map","i","type","href","isActive","pathname","to","startsWith","onClick","push","subviews","subview","j","stopPropagation","hideBranding"],"sources":["/home/runner/work/galadmin/galadmin/src/front/src/components/Sidebar.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport {\n    Link,\n    useHistory,\n    useLocation\n} from \"react-router-dom\";\nimport { ConfigContext } from '../contexts/ConfigContext'\n\nconst SidebarItemIconAndLabel = ({ view }) => (\n    <>\n        <div class=\"sidebarIcon\">\n            <i class={`fas fa-${view.icon || \"square\"}`}></i>\n        </div>\n        <div class=\"sidebarLabel\">{view.label}</div>\n    </>\n)\n\nexport default ({ logout }) => {\n    const location = useLocation();\n    const config = useContext(ConfigContext);\n    const history = useHistory();\n    const [showMenu, setShowMenu] = useState(false);\n\n    const toggleMenu = () => setShowMenu(!showMenu);\n\n    useEffect(() => {\n        const closeMenu = (e) => {\n            if (!e.target.closest('.menu') && !e.target.closest('.menuButton')) {\n                setShowMenu(false);\n            }\n        };\n\n        document.addEventListener('click', closeMenu);\n        return () => document.removeEventListener('click', closeMenu);\n    }, []);\n\n    console.log({ showMenu })\n\n    return (\n        <div class=\"sidebar\">\n            {config.logo ? <img src={config.logo} class=\"logo\" /> : null}\n            <div class=\"sidebarTitle\">{config.name}</div>\n            <div class=\"sidebarSubtitle\">Back-office</div>\n            {config.views.filter(view => !view.hidden).map((view, i) => {\n                if (view.type === \"link\") {\n                    return (\n                        <a href={view.src} key={i}>\n                            <div class=\"sidebarItem\">\n                                <div>\n                                    <SidebarItemIconAndLabel view={view} />\n                                </div>\n                            </div>\n                        </a>\n                    )\n                } else if (view.type === \"iframe\") {\n                    const isActive = location.pathname === `/iframe/${i}`\n                    return (\n                        <Link to={`/iframe/${i}`} key={i}>\n                            <div class={`sidebarItem ${isActive ? \"active\" : \"\"}`}>\n                                <div>\n                                    <SidebarItemIconAndLabel view={view} />\n                                </div>\n                            </div>\n                        </Link>\n                    )\n                } else if (view.type === \"custom\") {\n                    const isActive = location.pathname === `/customView/${i}`\n                    return (\n                        <Link to={`/customView/${i}`} key={i}>\n                            <div class={`sidebarItem ${isActive ? \"active\" : \"\"}`}>\n                                <div>\n                                    <SidebarItemIconAndLabel view={view} />\n                                </div>\n                            </div>\n                        </Link>\n                    )\n                } else if (view.type === \"table\") {\n                    const isActive =\n                        location.pathname === `/records/${i}` ||\n                        location.pathname === `/createRecord/${i}` ||\n                        location.pathname.startsWith(`/record/${i}/`) ||\n                        location.pathname.startsWith(`/editRecord/${i}/`)\n                    return (\n                        <div onClick={() => history.push(`/records/${i}`)} key={i}>\n                            <div class={`sidebarItem ${isActive ? \"active\" : \"\"}`}>\n                                <div>\n                                    <div class=\"notificationWrapper\"></div>\n                                    <SidebarItemIconAndLabel view={view} />\n                                </div>\n                                {view.subviews ? (\n                                    <>\n                                        <div class=\"subviewsSeparator\"></div>\n                                        {view.subviews.map((subview, j) => {\n                                            const isActive = location.pathname == `/records/${i}/${j}`\n                                            return (\n                                                <div onClick={(e) => {\n                                                    history.push(`/records/${i}/${j}`);\n                                                    e.stopPropagation();\n                                                }}>\n                                                    <div data-subview-index={j} class={isActive ? \"active\" : \"\"}>\n                                                        <div class=\"notificationWrapperForSubview\"></div>\n                                                        {subview.label}\n                                                    </div>\n                                                </div>\n                                            )\n                                        })}\n                                    </>\n                                ) : null}\n                            </div>\n                        </div>\n                    )\n                }\n            })}\n            {!config.hideBranding ? (\n                <div class=\"sidebarBranding\">Made with <i class=\"fas fa-heart\"></i> by Galadrim</div>\n            ) : null}\n            <div class=\"menu\" onClick={toggleMenu}>\n                <div class=\"menuButton\">\n                    <i class=\"far fa-ellipsis-v\"></i>\n                </div>\n                {showMenu ? (\n                    <div class=\"menuOptions\">\n                        <div onClick={logout} class=\"menuOption\">\n                            <i class=\"far fa-sign-out\"></i> Se déconnecter\n                        </div>\n                    </div>\n                ) : null}\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}