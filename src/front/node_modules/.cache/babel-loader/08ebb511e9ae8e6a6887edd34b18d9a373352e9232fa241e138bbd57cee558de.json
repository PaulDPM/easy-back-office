{"ast":null,"code":"import _defineProperty from\"/home/runner/work/galadmin/galadmin/src/front/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/home/runner/work/galadmin/galadmin/src/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default(function(_ref){var column=_ref.column,_onChange3=_ref.onChange,initialData=_ref.initialData;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),options=_useState2[0],setOptions=_useState2[1];var _useParams=useParams(),viewIndex=_useParams.viewIndex;useEffect(function(){axios.post(\"/foreignSelectRecords\",{viewIndex:viewIndex,columnId:column.__id__}).then(function(response){var _response$data$,_response$data$2;setOptions(response.data);_onChange3(_defineProperty({},column.name,(initialData===null||initialData===void 0?void 0:initialData[column.name])||(column.optional?\"NULL\":(_response$data$=response.data[0])===null||_response$data$===void 0?void 0:_response$data$.value)),{label:column.optional?\"-\":(_response$data$2=response.data[0])===null||_response$data$2===void 0?void 0:_response$data$2.label});});},[]);return options===null?/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-circle-notch fa-spin\",style:{color:\"#536579\"}}):/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){var _options$find;return _onChange3(_defineProperty({},column.name,e.target.value),{label:(_options$find=options.find(function(x){return x.value==e.target.value;}))===null||_options$find===void 0?void 0:_options$find.label});},defaultValue:initialData===null||initialData===void 0?void 0:initialData[column.name],children:[column.optional?/*#__PURE__*/_jsx(\"option\",{value:\"NULL\",children:\"-\"}):null,options.map(function(option){return/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value);})]});});","map":{"version":3,"names":["axios","useEffect","useState","useParams","jsx","_jsx","jsxs","_jsxs","_ref","column","onChange","initialData","_useState","_useState2","_slicedToArray","options","setOptions","_useParams","viewIndex","post","columnId","__id__","then","response","_response$data$","_response$data$2","data","_defineProperty","name","optional","value","label","class","style","color","e","_options$find","target","find","x","defaultValue","children","map","option"],"sources":["/home/runner/work/galadmin/galadmin/src/front/src/components/inputs/ForeignSelectInput.js"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\"\nimport {\n    useParams\n} from \"react-router-dom\";\n\nexport default ({ column, onChange, initialData }) => {\n    const [options, setOptions] = useState(null)\n    const { viewIndex } = useParams();\n\n    useEffect(() => {\n        axios.post(\"/foreignSelectRecords\", {\n            viewIndex,\n            columnId: column.__id__\n        }).then((response) => {\n            setOptions(response.data)\n            onChange({ \n                [column.name]: initialData?.[column.name] || (column.optional ? \"NULL\" : response.data[0]?.value) \n            }, {\n                label: column.optional ? \"-\" : response.data[0]?.label\n            })\n        })\n    }, [])\n\n    return options === null ? (\n        <i class='fa fa-circle-notch fa-spin' style={{ color: \"#536579\" }}></i>\n    ) : (\n        <select\n            onChange={(e) => onChange({ \n                [column.name]: e.target.value \n            }, {\n                label: options.find(x => x.value == e.target.value)?.label\n            })}\n            defaultValue={initialData?.[column.name]}\n        >\n            {column.optional ? <option value='NULL'>-</option> : null}\n            {options.map((option) => {\n                return (\n                    <option value={option.value} key={option.value}>\n                        {option.label}\n                    </option>\n                )\n            })}\n        </select>\n    );\n}\n"],"mappings":"wQAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OACIC,SAAS,KACN,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1B,eAAe,SAAAC,IAAA,CAAuC,IAApC,CAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CAAEC,UAAQ,CAAAF,IAAA,CAARE,QAAQ,CAAEC,WAAW,CAAAH,IAAA,CAAXG,WAAW,CAC3C,IAAAC,SAAA,CAA8BV,QAAQ,CAAC,IAAI,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArCG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAC1B,IAAAI,UAAA,CAAsBd,SAAS,CAAC,CAAC,CAAzBe,SAAS,CAAAD,UAAA,CAATC,SAAS,CAEjBjB,SAAS,CAAC,UAAM,CACZD,KAAK,CAACmB,IAAI,CAAC,uBAAuB,CAAE,CAChCD,SAAS,CAATA,SAAS,CACTE,QAAQ,CAAEX,MAAM,CAACY,MACrB,CAAC,CAAC,CAACC,IAAI,CAAC,SAACC,QAAQ,CAAK,KAAAC,eAAA,CAAAC,gBAAA,CAClBT,UAAU,CAACO,QAAQ,CAACG,IAAI,CAAC,CACzBhB,UAAQ,CAAAiB,eAAA,IACHlB,MAAM,CAACmB,IAAI,CAAG,CAAAjB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAGF,MAAM,CAACmB,IAAI,CAAC,IAAKnB,MAAM,CAACoB,QAAQ,CAAG,MAAM,EAAAL,eAAA,CAAGD,QAAQ,CAACG,IAAI,CAAC,CAAC,CAAC,UAAAF,eAAA,iBAAhBA,eAAA,CAAkBM,KAAK,CAAC,EAClG,CACCC,KAAK,CAAEtB,MAAM,CAACoB,QAAQ,CAAG,GAAG,EAAAJ,gBAAA,CAAGF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAAC,UAAAD,gBAAA,iBAAhBA,gBAAA,CAAkBM,KACrD,CAAC,CAAC,CACN,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAAhB,OAAO,GAAK,IAAI,cACnBV,IAAA,MAAG2B,KAAK,CAAC,4BAA4B,CAACC,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAI,CAAC,cAEvE3B,KAAA,WACIG,QAAQ,CAAE,SAAAA,SAACyB,CAAC,MAAAC,aAAA,OAAK,CAAA1B,UAAQ,CAAAiB,eAAA,IACpBlB,MAAM,CAACmB,IAAI,CAAGO,CAAC,CAACE,MAAM,CAACP,KAAK,EAC9B,CACCC,KAAK,EAAAK,aAAA,CAAErB,OAAO,CAACuB,IAAI,CAAC,SAAAC,CAAC,QAAI,CAAAA,CAAC,CAACT,KAAK,EAAIK,CAAC,CAACE,MAAM,CAACP,KAAK,GAAC,UAAAM,aAAA,iBAA5CA,aAAA,CAA8CL,KACzD,CAAC,CAAC,EAAC,CACHS,YAAY,CAAE7B,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAGF,MAAM,CAACmB,IAAI,CAAE,CAAAa,QAAA,EAExChC,MAAM,CAACoB,QAAQ,cAAGxB,IAAA,WAAQyB,KAAK,CAAC,MAAM,CAAAW,QAAA,CAAC,GAAC,CAAQ,CAAC,CAAG,IAAI,CACxD1B,OAAO,CAAC2B,GAAG,CAAC,SAACC,MAAM,CAAK,CACrB,mBACItC,IAAA,WAAQyB,KAAK,CAAEa,MAAM,CAACb,KAAM,CAAAW,QAAA,CACvBE,MAAM,CAACZ,KAAK,EADiBY,MAAM,CAACb,KAEjC,CAAC,CAEjB,CAAC,CAAC,EACE,CACX,CACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}