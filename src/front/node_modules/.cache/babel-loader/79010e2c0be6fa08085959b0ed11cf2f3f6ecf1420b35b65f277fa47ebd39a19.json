{"ast":null,"code":"import _defineProperty from\"/home/runner/work/galadmin/galadmin/src/front/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/runner/work/galadmin/galadmin/src/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";window.Quill.prototype.getHTML=function(){return this.container.querySelector('.ql-editor').innerHTML;};export default(function(_ref){var column=_ref.column,onChange=_ref.onChange,initialData=_ref.initialData;var quillContainer=useRef(null);useEffect(function(){if(quillContainer.current&&!quillContainer.current.editor){var editor=new window.Quill(quillContainer.current,{theme:'snow',modules:{toolbar:[[{'header':[1,2,3,4,false]}],['bold','italic','underline','link'],['image'],[{'align':[]}],[{'list':'ordered'},{'list':'bullet'}],['clean']]}});if(column.contentField){if(initialData!==null&&initialData!==void 0&&initialData[column.contentField]){try{editor.setContents(JSON.parse(initialData===null||initialData===void 0?void 0:initialData[column.contentField]));}catch(e){}}}else if(column.htmlField){editor.clipboard.dangerouslyPasteHTML(0,initialData===null||initialData===void 0?void 0:initialData[column.htmlField]);}editor.on('text-change',function(){onChange(_objectSpread(_defineProperty({},column.htmlField,editor.getHTML()),column.contentField&&_defineProperty({},column.contentField,JSON.stringify(editor.getContents()))));});quillContainer.current.editor=editor;return editor.off();}},[quillContainer.current]);return/*#__PURE__*/_jsx(\"div\",{class:\"quillContainer\",children:/*#__PURE__*/_jsx(\"div\",{class:\"quill\",ref:quillContainer,style:column.height?{height:column.height}:null})});});","map":{"version":3,"names":["useEffect","useRef","jsx","_jsx","window","Quill","prototype","getHTML","container","querySelector","innerHTML","_ref","column","onChange","initialData","quillContainer","current","editor","theme","modules","toolbar","contentField","setContents","JSON","parse","e","htmlField","clipboard","dangerouslyPasteHTML","on","_objectSpread","_defineProperty","stringify","getContents","off","class","children","ref","style","height"],"sources":["/home/runner/work/galadmin/galadmin/src/front/src/components/inputs/RichTextInput.js"],"sourcesContent":["import { useEffect, useRef } from \"react\";\n\nwindow.Quill.prototype.getHTML = function () {\n    return this.container.querySelector('.ql-editor').innerHTML;\n};\n\nexport default ({ column, onChange, initialData }) => {\n    const quillContainer = useRef(null);\n\n    useEffect(() => {\n        if (quillContainer.current && !quillContainer.current.editor) {\n            const editor = new window.Quill(quillContainer.current, {\n                theme: 'snow',\n                modules: {\n                    toolbar: [\n                        [{\n                            'header': [1, 2, 3, 4, false]\n                        }],\n                        ['bold', 'italic', 'underline', 'link'],\n                        ['image'],\n                        [{\n                            'align': []\n                        }],\n                        [{\n                            'list': 'ordered'\n                        }, {\n                            'list': 'bullet'\n                        }],\n                        ['clean']\n                    ]\n                }\n            });\n            if (column.contentField) {\n                if (initialData?.[column.contentField]) {\n                    try {\n                        editor.setContents(JSON.parse(initialData?.[column.contentField]))\n                    } catch (e) { }\n                }\n            } else if (column.htmlField) {\n                editor.clipboard.dangerouslyPasteHTML(0, initialData?.[column.htmlField])\n            }\n            editor.on('text-change', () => {\n                onChange({\n                    [column.htmlField]: editor.getHTML(),\n                    ...(column.contentField && { [column.contentField]: JSON.stringify(editor.getContents()) })\n                })\n            });\n            quillContainer.current.editor = editor\n            return editor.off();\n        }\n    }, [quillContainer.current])\n\n    return (\n        <div class='quillContainer'>\n            <div class=\"quill\" ref={quillContainer} style={column.height ? { height: column.height } : null} />\n        </div>\n    );\n};\n"],"mappings":"uQAAA,OAASA,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1CC,MAAM,CAACC,KAAK,CAACC,SAAS,CAACC,OAAO,CAAG,UAAY,CACzC,MAAO,KAAI,CAACC,SAAS,CAACC,aAAa,CAAC,YAAY,CAAC,CAACC,SAAS,CAC/D,CAAC,CAED,eAAe,SAAAC,IAAA,CAAuC,IAApC,CAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CAAEC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CAAEC,WAAW,CAAAH,IAAA,CAAXG,WAAW,CAC3C,GAAM,CAAAC,cAAc,CAAGd,MAAM,CAAC,IAAI,CAAC,CAEnCD,SAAS,CAAC,UAAM,CACZ,GAAIe,cAAc,CAACC,OAAO,EAAI,CAACD,cAAc,CAACC,OAAO,CAACC,MAAM,CAAE,CAC1D,GAAM,CAAAA,MAAM,CAAG,GAAI,CAAAb,MAAM,CAACC,KAAK,CAACU,cAAc,CAACC,OAAO,CAAE,CACpDE,KAAK,CAAE,MAAM,CACbC,OAAO,CAAE,CACLC,OAAO,CAAE,CACL,CAAC,CACG,QAAQ,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,KAAK,CAChC,CAAC,CAAC,CACF,CAAC,MAAM,CAAE,QAAQ,CAAE,WAAW,CAAE,MAAM,CAAC,CACvC,CAAC,OAAO,CAAC,CACT,CAAC,CACG,OAAO,CAAE,EACb,CAAC,CAAC,CACF,CAAC,CACG,MAAM,CAAE,SACZ,CAAC,CAAE,CACC,MAAM,CAAE,QACZ,CAAC,CAAC,CACF,CAAC,OAAO,CAAC,CAEjB,CACJ,CAAC,CAAC,CACF,GAAIR,MAAM,CAACS,YAAY,CAAE,CACrB,GAAIP,WAAW,SAAXA,WAAW,WAAXA,WAAW,CAAGF,MAAM,CAACS,YAAY,CAAC,CAAE,CACpC,GAAI,CACAJ,MAAM,CAACK,WAAW,CAACC,IAAI,CAACC,KAAK,CAACV,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAGF,MAAM,CAACS,YAAY,CAAC,CAAC,CAAC,CACtE,CAAE,MAAOI,CAAC,CAAE,CAAE,CAClB,CACJ,CAAC,IAAM,IAAIb,MAAM,CAACc,SAAS,CAAE,CACzBT,MAAM,CAACU,SAAS,CAACC,oBAAoB,CAAC,CAAC,CAAEd,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAGF,MAAM,CAACc,SAAS,CAAC,CAAC,CAC7E,CACAT,MAAM,CAACY,EAAE,CAAC,aAAa,CAAE,UAAM,CAC3BhB,QAAQ,CAAAiB,aAAA,CAAAC,eAAA,IACHnB,MAAM,CAACc,SAAS,CAAGT,MAAM,CAACV,OAAO,CAAC,CAAC,EAChCK,MAAM,CAACS,YAAY,EAAAU,eAAA,IAAOnB,MAAM,CAACS,YAAY,CAAGE,IAAI,CAACS,SAAS,CAACf,MAAM,CAACgB,WAAW,CAAC,CAAC,CAAC,CAAE,CAC7F,CAAC,CACN,CAAC,CAAC,CACFlB,cAAc,CAACC,OAAO,CAACC,MAAM,CAAGA,MAAM,CACtC,MAAO,CAAAA,MAAM,CAACiB,GAAG,CAAC,CAAC,CACvB,CACJ,CAAC,CAAE,CAACnB,cAAc,CAACC,OAAO,CAAC,CAAC,CAE5B,mBACIb,IAAA,QAAKgC,KAAK,CAAC,gBAAgB,CAAAC,QAAA,cACvBjC,IAAA,QAAKgC,KAAK,CAAC,OAAO,CAACE,GAAG,CAAEtB,cAAe,CAACuB,KAAK,CAAE1B,MAAM,CAAC2B,MAAM,CAAG,CAAEA,MAAM,CAAE3B,MAAM,CAAC2B,MAAO,CAAC,CAAG,IAAK,CAAE,CAAC,CAClG,CAAC,CAEd,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}