{"ast":null,"code":"import{useEffect,useRef}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";export default(function(_ref){var panel=_ref.panel,record=_ref.record,view=_ref.view;var mapRef=useRef();useEffect(function(){if(window.google&&record){if(panel.query){axios.get(\"/customQuery\",{query:panel.query,primaryValue:record[view.primaryId]}).then(function(response){var _response$data;var result=response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data[0];if(result){initMap(result.Lat,result.Lng,panel.zoom||12);}});}else{initMap(record[panel.latitudeField],record[panel.longitudeField],panel.zoom||12);}}},[record,window.google]);var initMap=function initMap(lat,lng,zoom){var map=new window.google.maps.Map(mapRef.current,{zoom:zoom,center:{lat:lat,lng:lng}});new window.google.maps.Marker({position:{lat:lat,lng:lng},map:map});};return/*#__PURE__*/_jsx(\"div\",{class:\"map\",ref:mapRef});});","map":{"version":3,"names":["useEffect","useRef","axios","jsx","_jsx","_ref","panel","record","view","mapRef","window","google","query","get","primaryValue","primaryId","then","response","_response$data","result","data","initMap","Lat","Lng","zoom","latitudeField","longitudeField","lat","lng","map","maps","Map","current","center","Marker","position","class","ref"],"sources":["/home/runner/work/galadmin/galadmin/src/front/src/components/panels/MapPanel.js"],"sourcesContent":["import { useEffect, useRef } from \"react\"\nimport axios from \"axios\";\n\nexport default ({ panel, record, view }) => {\n    const mapRef = useRef();\n\n    useEffect(() => {\n        if (window.google && record) {\n            if (panel.query) {\n                axios.get(\"/customQuery\", {\n                    query: panel.query,\n                    primaryValue: record[view.primaryId]\n                }).then((response) => {\n                    const result = response?.data?.[0]\n                    if (result) {\n                        initMap(result.Lat, result.Lng, panel.zoom || 12)\n                    }\n                })\n            } else {\n                initMap(record[panel.latitudeField], record[panel.longitudeField], panel.zoom || 12)\n            }\n        }\n    }, [record, window.google])\n\n    const initMap = (lat, lng, zoom) => {\n        const map = new window.google.maps.Map(mapRef.current, {\n            zoom,\n            center: {\n                lat,\n                lng\n            }\n        });\n        new window.google.maps.Marker({\n            position: { lat, lng },\n            map\n        });\n    }\n\n    return (\n        <div class='map' ref={mapRef}></div>\n    )\n}"],"mappings":"AAAA,OAASA,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACzC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,eAAe,SAAAC,IAAA,CAA6B,IAA1B,CAAAC,KAAK,CAAAD,IAAA,CAALC,KAAK,CAAEC,MAAM,CAAAF,IAAA,CAANE,MAAM,CAAEC,IAAI,CAAAH,IAAA,CAAJG,IAAI,CACjC,GAAM,CAAAC,MAAM,CAAGR,MAAM,CAAC,CAAC,CAEvBD,SAAS,CAAC,UAAM,CACZ,GAAIU,MAAM,CAACC,MAAM,EAAIJ,MAAM,CAAE,CACzB,GAAID,KAAK,CAACM,KAAK,CAAE,CACbV,KAAK,CAACW,GAAG,CAAC,cAAc,CAAE,CACtBD,KAAK,CAAEN,KAAK,CAACM,KAAK,CAClBE,YAAY,CAAEP,MAAM,CAACC,IAAI,CAACO,SAAS,CACvC,CAAC,CAAC,CAACC,IAAI,CAAC,SAACC,QAAQ,CAAK,KAAAC,cAAA,CAClB,GAAM,CAAAC,MAAM,CAAGF,QAAQ,SAARA,QAAQ,kBAAAC,cAAA,CAARD,QAAQ,CAAEG,IAAI,UAAAF,cAAA,iBAAdA,cAAA,CAAiB,CAAC,CAAC,CAClC,GAAIC,MAAM,CAAE,CACRE,OAAO,CAACF,MAAM,CAACG,GAAG,CAAEH,MAAM,CAACI,GAAG,CAAEjB,KAAK,CAACkB,IAAI,EAAI,EAAE,CAAC,CACrD,CACJ,CAAC,CAAC,CACN,CAAC,IAAM,CACHH,OAAO,CAACd,MAAM,CAACD,KAAK,CAACmB,aAAa,CAAC,CAAElB,MAAM,CAACD,KAAK,CAACoB,cAAc,CAAC,CAAEpB,KAAK,CAACkB,IAAI,EAAI,EAAE,CAAC,CACxF,CACJ,CACJ,CAAC,CAAE,CAACjB,MAAM,CAAEG,MAAM,CAACC,MAAM,CAAC,CAAC,CAE3B,GAAM,CAAAU,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAIM,GAAG,CAAEC,GAAG,CAAEJ,IAAI,CAAK,CAChC,GAAM,CAAAK,GAAG,CAAG,GAAI,CAAAnB,MAAM,CAACC,MAAM,CAACmB,IAAI,CAACC,GAAG,CAACtB,MAAM,CAACuB,OAAO,CAAE,CACnDR,IAAI,CAAJA,IAAI,CACJS,MAAM,CAAE,CACJN,GAAG,CAAHA,GAAG,CACHC,GAAG,CAAHA,GACJ,CACJ,CAAC,CAAC,CACF,GAAI,CAAAlB,MAAM,CAACC,MAAM,CAACmB,IAAI,CAACI,MAAM,CAAC,CAC1BC,QAAQ,CAAE,CAAER,GAAG,CAAHA,GAAG,CAAEC,GAAG,CAAHA,GAAI,CAAC,CACtBC,GAAG,CAAHA,GACJ,CAAC,CAAC,CACN,CAAC,CAED,mBACIzB,IAAA,QAAKgC,KAAK,CAAC,KAAK,CAACC,GAAG,CAAE5B,MAAO,CAAM,CAAC,CAE5C,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}