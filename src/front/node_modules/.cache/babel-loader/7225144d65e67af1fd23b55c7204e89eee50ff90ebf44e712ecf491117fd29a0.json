{"ast":null,"code":"import _slicedToArray from\"/home/runner/work/galadmin/galadmin/src/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{BrowserRouter as Router,Switch,Route}from\"react-router-dom\";import{useEffect,useState}from\"react\";import'./App.css';import Sidebar from'./components/Sidebar';import RedirectToFirstView from'./components/RedirectToFirstView';import CreateRecord from'./pages/CreateRecord';import EditRecord from'./pages/EditRecord';import Records from'./pages/Records';import Record from'./pages/Record';import Login from'./pages/Login';import Iframe from'./pages/Iframe';import CustomView from'./pages/CustomView';import{ConfigProvider}from'./contexts/ConfigContext';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.withCredentials=true;axios.defaults.baseURL=process.env.NODE_ENV===\"development\"?'http://localhost/admin/api':'/_HOMEPAGE_/api';function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),isAuthenticated=_useState2[0],setIsAuthenticated=_useState2[1];useEffect(function(){axios.get(\"/isAuthenticated\").then(function(response){setIsAuthenticated(response.data.isAuthenticated);});},[]);var logout=function logout(){setIsAuthenticated(false);axios.get(\"/logout\");};return/*#__PURE__*/_jsx(\"div\",{id:\"body\",children:isAuthenticated===true?/*#__PURE__*/_jsx(ConfigProvider,{children:/*#__PURE__*/_jsxs(Router,{basename:process.env.NODE_ENV===\"development\"?'/admin':\"/_HOMEPAGE_\",children:[/*#__PURE__*/_jsx(Sidebar,{logout:logout}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/records/:viewIndex/:subviewIndex?\",children:/*#__PURE__*/_jsx(Records,{})}),/*#__PURE__*/_jsx(Route,{path:\"/record/:viewIndex/:recordId\",children:/*#__PURE__*/_jsx(Record,{})}),/*#__PURE__*/_jsx(Route,{path:\"/editRecord/:viewIndex/:recordId\",children:/*#__PURE__*/_jsx(EditRecord,{})}),/*#__PURE__*/_jsx(Route,{path:\"/createRecord/:viewIndex/:panelIndex?/:recordId?\",children:/*#__PURE__*/_jsx(CreateRecord,{})}),/*#__PURE__*/_jsx(Route,{path:\"/iframe/:viewIndex\",children:/*#__PURE__*/_jsx(Iframe,{})}),/*#__PURE__*/_jsx(Route,{path:\"/customView/:viewIndex\",children:/*#__PURE__*/_jsx(CustomView,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",children:/*#__PURE__*/_jsx(RedirectToFirstView,{})})]})]})}):isAuthenticated===false?/*#__PURE__*/_jsx(Login,{setIsAuthenticated:setIsAuthenticated}):/*#__PURE__*/_jsx(\"div\",{class:\"appLoading\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-circle-notch fa-spin\"})})});}export default App;","map":{"version":3,"names":["BrowserRouter","Router","Switch","Route","useEffect","useState","Sidebar","RedirectToFirstView","CreateRecord","EditRecord","Records","Record","Login","Iframe","CustomView","ConfigProvider","axios","jsx","_jsx","jsxs","_jsxs","defaults","withCredentials","baseURL","process","env","NODE_ENV","App","_useState","_useState2","_slicedToArray","isAuthenticated","setIsAuthenticated","get","then","response","data","logout","id","children","basename","path","class"],"sources":["/home/runner/work/galadmin/galadmin/src/front/src/App.js"],"sourcesContent":["import {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport './App.css';\nimport Sidebar from './components/Sidebar'\nimport RedirectToFirstView from './components/RedirectToFirstView'\nimport CreateRecord from './pages/CreateRecord'\nimport EditRecord from './pages/EditRecord'\nimport Records from './pages/Records'\nimport Record from './pages/Record'\nimport Login from './pages/Login'\nimport Iframe from './pages/Iframe'\nimport CustomView from './pages/CustomView'\nimport { ConfigProvider } from './contexts/ConfigContext'\nimport axios from \"axios\";\n\naxios.defaults.withCredentials = true;\naxios.defaults.baseURL = process.env.NODE_ENV === \"development\" ? 'http://localhost/admin/api' : '/_HOMEPAGE_/api';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(null);\n\n  useEffect(() => {\n    axios.get(\"/isAuthenticated\").then((response) => {\n      setIsAuthenticated(response.data.isAuthenticated)\n    })\n  }, []);\n  \n  const logout = () => {\n    setIsAuthenticated(false)\n    axios.get(\"/logout\")\n  }\n\n  return (\n    <div id=\"body\">\n      {isAuthenticated === true ? (\n        <ConfigProvider>\n          <Router basename={process.env.NODE_ENV === \"development\" ? '/admin' : \"/_HOMEPAGE_\"}>\n            <Sidebar logout={logout} />\n            <Switch>\n              <Route path=\"/records/:viewIndex/:subviewIndex?\">\n                <Records />\n              </Route>\n              <Route path=\"/record/:viewIndex/:recordId\">\n                <Record />\n              </Route>\n              <Route path=\"/editRecord/:viewIndex/:recordId\">\n                <EditRecord />\n              </Route>\n              <Route path=\"/createRecord/:viewIndex/:panelIndex?/:recordId?\">\n                <CreateRecord />\n              </Route>\n              <Route path=\"/iframe/:viewIndex\">\n                <Iframe />\n              </Route>\n              <Route path=\"/customView/:viewIndex\">\n                <CustomView />\n              </Route>\n              <Route path=\"/\">\n                <RedirectToFirstView />\n              </Route>\n            </Switch>\n          </Router>\n        </ConfigProvider>\n      ) : isAuthenticated === false ? (\n        <Login setIsAuthenticated={setIsAuthenticated} />\n      ) : (\n        <div class=\"appLoading\">\n          <i class='fa fa-circle-notch fa-spin'></i>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}