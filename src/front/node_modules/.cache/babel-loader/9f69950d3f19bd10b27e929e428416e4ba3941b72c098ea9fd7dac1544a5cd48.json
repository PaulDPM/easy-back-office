{"ast":null,"code":"import{useEffect,useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export default(function(_ref){var column=_ref.column,onChange=_ref.onChange,initialData=_ref.initialData;var googleMapsInput=useRef(null);useEffect(function(){if(googleMapsInput.current&&window.google){var autocomplete=new window.google.maps.places.Autocomplete(googleMapsInput.current,column.componentRestrictions?{componentRestrictions:column.componentRestrictions}:{});autocomplete.addListener('place_changed',function(){var place=autocomplete.getPlace();if(place.length===0){return;}if(!place.geometry){return;}else{var fieldValues={latitudeField:function latitudeField(place){return place.geometry.location.lat();},longitudeField:function longitudeField(place){return place.geometry.location.lng();},addressField:function addressField(place){return place.formatted_address;},streetNumberField:function streetNumberField(place){var _place$address_compon;return(_place$address_compon=place.address_components.find(function(x){return x.type===\"street_number\";}))===null||_place$address_compon===void 0?void 0:_place$address_compon.long_name;},routeField:function routeField(place){var _place$address_compon2;return(_place$address_compon2=place.address_components.find(function(x){return x.type===\"route\";}))===null||_place$address_compon2===void 0?void 0:_place$address_compon2.long_name;},localityField:function localityField(place){var _place$address_compon3;return(_place$address_compon3=place.address_components.find(function(x){return x.type===\"locality\";}))===null||_place$address_compon3===void 0?void 0:_place$address_compon3.long_name;},administrativeAreaLevel2Field:function administrativeAreaLevel2Field(place){var _place$address_compon4;return(_place$address_compon4=place.address_components.find(function(x){return x.type===\"administrative_area_level_2\";}))===null||_place$address_compon4===void 0?void 0:_place$address_compon4.long_name;},administrativeAreaLevel1Field:function administrativeAreaLevel1Field(place){var _place$address_compon5;return(_place$address_compon5=place.address_components.find(function(x){return x.type===\"administrative_area_level_1\";}))===null||_place$address_compon5===void 0?void 0:_place$address_compon5.long_name;},countryField:function countryField(place){var _place$address_compon6;return(_place$address_compon6=place.address_components.find(function(x){return x.type===\"country\";}))===null||_place$address_compon6===void 0?void 0:_place$address_compon6.long_name;},postalCodeField:function postalCodeField(place){var _place$address_compon7;return(_place$address_compon7=place.address_components.find(function(x){return x.type===\"postal_code\";}))===null||_place$address_compon7===void 0?void 0:_place$address_compon7.long_name;}};var placeData={};for(var key in fieldValues){if(column[key]){placeData[column[key]]=fieldValues[key](place);}}googleMapsInput.current.value=place.formatted_address;onChange(placeData);}});}},[googleMapsInput.current]);useEffect(function(){var _googleMapsInput$curr;var setInputValue=function setInputValue(){if(googleMapsInput.current){googleMapsInput.current.value=\"\";}};googleMapsInput===null||googleMapsInput===void 0?void 0:(_googleMapsInput$curr=googleMapsInput.current)===null||_googleMapsInput$curr===void 0?void 0:_googleMapsInput$curr.addEventListener(\"focusout\",setInputValue);return function(){var _googleMapsInput$curr2;return googleMapsInput===null||googleMapsInput===void 0?void 0:(_googleMapsInput$curr2=googleMapsInput.current)===null||_googleMapsInput$curr2===void 0?void 0:_googleMapsInput$curr2.removeEventListener(\"focusout\",setInputValue);};},[googleMapsInput.current]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\",ref:googleMapsInput,defaultValue:initialData===null||initialData===void 0?void 0:initialData[column.name]})});});","map":{"version":3,"names":["useEffect","useRef","jsx","_jsx","_ref","column","onChange","initialData","googleMapsInput","current","window","google","autocomplete","maps","places","Autocomplete","componentRestrictions","addListener","place","getPlace","length","geometry","fieldValues","latitudeField","location","lat","longitudeField","lng","addressField","formatted_address","streetNumberField","_place$address_compon","address_components","find","x","type","long_name","routeField","_place$address_compon2","localityField","_place$address_compon3","administrativeAreaLevel2Field","_place$address_compon4","administrativeAreaLevel1Field","_place$address_compon5","countryField","_place$address_compon6","postalCodeField","_place$address_compon7","placeData","key","value","_googleMapsInput$curr","setInputValue","addEventListener","_googleMapsInput$curr2","removeEventListener","children","placeholder","ref","defaultValue","name"],"sources":["/home/runner/work/galadmin/galadmin/src/front/src/components/inputs/AddressInput.js"],"sourcesContent":["import { useEffect, useRef } from \"react\";\n\nexport default ({ column, onChange, initialData }) => {\n    const googleMapsInput = useRef(null);\n\n    useEffect(() => {\n        if (googleMapsInput.current && window.google) {\n            const autocomplete = new window.google.maps.places.Autocomplete(\n                googleMapsInput.current,\n                column.componentRestrictions ? {\n                    componentRestrictions: column.componentRestrictions\n                } : {}\n            )\n            autocomplete.addListener('place_changed', () => {\n                const place = autocomplete.getPlace();\n                if (place.length === 0) {\n                    return;\n                }\n                if (!place.geometry) {\n                    return;\n                } else {\n                    const fieldValues = {\n                        latitudeField: (place) => place.geometry.location.lat(),\n                        longitudeField: (place) => place.geometry.location.lng(),\n                        addressField: (place) => place.formatted_address,\n                        streetNumberField: (place) => place.address_components.find(x => x.type === \"street_number\")?.long_name,\n                        routeField: (place) => place.address_components.find(x => x.type === \"route\")?.long_name,\n                        localityField: (place) => place.address_components.find(x => x.type === \"locality\")?.long_name,\n                        administrativeAreaLevel2Field: (place) => place.address_components.find(x => x.type === \"administrative_area_level_2\")?.long_name,\n                        administrativeAreaLevel1Field: (place) => place.address_components.find(x => x.type === \"administrative_area_level_1\")?.long_name,\n                        countryField: (place) => place.address_components.find(x => x.type === \"country\")?.long_name,\n                        postalCodeField: (place) => place.address_components.find(x => x.type === \"postal_code\")?.long_name\n                    }\n                    const placeData = {}\n                    for (const key in fieldValues) {\n                        if (column[key]) {\n                            placeData[column[key]] = fieldValues[key](place)\n                        }\n                    }\n                    googleMapsInput.current.value = place.formatted_address\n                    onChange(placeData);\n                }\n            });\n        }\n    }, [googleMapsInput.current]);\n\n    useEffect(() => {\n        const setInputValue = () => {\n            if (googleMapsInput.current) {\n                googleMapsInput.current.value = \"\"\n            }\n        }\n        googleMapsInput?.current?.addEventListener(\"focusout\", setInputValue)\n        return () => googleMapsInput?.current?.removeEventListener(\"focusout\", setInputValue)\n    }, [googleMapsInput.current])\n\n    return (\n        <div>\n            <input\n                type='text'\n                placeholder=''\n                ref={googleMapsInput}\n                defaultValue={initialData?.[column.name]}\n            />\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}