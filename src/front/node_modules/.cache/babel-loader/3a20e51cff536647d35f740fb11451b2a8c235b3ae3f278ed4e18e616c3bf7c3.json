{"ast":null,"code":"import evalExpression from\"./evalExpression\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";export default(function(column,record,config,onTable){var foreignViewIndex=column.dataType==='foreign'?config.views.findIndex(function(x){return x.tableName===column.table;}):-1;if(column.dataType==='foreign'&&foreignViewIndex>-1){if(column.formatValue){return/*#__PURE__*/_jsx(Link,{to:\"/record/\".concat(foreignViewIndex,\"/\").concat(record[column.name]),dangerouslySetInnerHTML:{__html:record[\"__formatValue-\".concat(column.__id__,\"__\")]}});}else if(column.formattedValue){return/*#__PURE__*/_jsx(Link,{to:\"/record/\".concat(foreignViewIndex,\"/\").concat(record[column.name]),children:evalExpression(column.formattedValue,record)});}else{return/*#__PURE__*/_jsx(Link,{to:\"/record/\".concat(foreignViewIndex,\"/\").concat(record[column.name]),children:record[column.name]});}}else if(column.showAsPicture){var imageUrl=column.baseUrl+record[column.pathField];return record[column.pathField]?/*#__PURE__*/_jsx(\"a\",{href:imageUrl,target:\"_blank\",children:/*#__PURE__*/_jsx(\"img\",{src:imageUrl,style:{width:onTable?60:300,height:onTable?30:150,objectFit:\"contain\"}})}):null;}else if(column.formatValue){return/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:record[\"__formatValue-\".concat(column.__id__,\"__\")]}});}else if(column.formattedValue){return/*#__PURE__*/_jsx(\"div\",{children:evalExpression(column.formattedValue,record)});}else if(column.action){if(column.actionDisplayCondition){var isDisplaying=evalExpression(column.actionDisplayCondition,record);if(!isDisplaying)return\"\";}var data=JSON.parse(JSON.stringify(column.data));for(var key in data){data[key]=evalExpression(data[key],record);}return/*#__PURE__*/_jsx(\"div\",{class:\"actionButton\",\"data-route\":\"\\\" + column.route + \\\"\",\"data-data\":\"\\\" + JSON.stringify(data) + \\\"\",children:column.action});}else if(column.dataType===\"tinyint\"){return/*#__PURE__*/_jsx(\"div\",{children:record[column.name]===1?\"Oui\":\"Non\"});}else if(column.dataType===\"color\"){return/*#__PURE__*/_jsx(\"div\",{class:\"colorPreview\",style:{backgroundColor:record[column.name]}});}else if(column.dataType===\"richText\"||column.dataType===\"betterRichText\"){return/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:record[column.htmlField]}});}else if(column.dataType===\"select\"&&column.options&&column.options.constructor==Object){return/*#__PURE__*/_jsx(\"div\",{children:column.options[record[column.name]]});}else{return/*#__PURE__*/_jsx(\"div\",{children:record[column.name]});}});","map":{"version":3,"names":["evalExpression","Link","jsx","_jsx","column","record","config","onTable","foreignViewIndex","dataType","views","findIndex","x","tableName","table","formatValue","to","concat","name","dangerouslySetInnerHTML","__html","__id__","formattedValue","children","showAsPicture","imageUrl","baseUrl","pathField","href","target","src","style","width","height","objectFit","action","actionDisplayCondition","isDisplaying","data","JSON","parse","stringify","key","class","backgroundColor","htmlField","options","constructor","Object"],"sources":["/home/runner/work/galadmin/galadmin/src/front/src/utils/getFormattedValue.js"],"sourcesContent":["import evalExpression from \"./evalExpression\"\nimport {\n    Link\n} from \"react-router-dom\";\n\nexport default (column, record, config, onTable) => {\n    const foreignViewIndex = column.dataType === 'foreign' ? config.views.findIndex(x => x.tableName === column.table) : -1\n    if (column.dataType === 'foreign' && foreignViewIndex > -1) {\n        if (column.formatValue) {\n            return <Link to={`/record/${foreignViewIndex}/${record[column.name]}`} dangerouslySetInnerHTML={{ __html: record[`__formatValue-${column.__id__}__`] }} />\n        } else if (column.formattedValue) {\n            return <Link to={`/record/${foreignViewIndex}/${record[column.name]}`}>{evalExpression(column.formattedValue, record)}</Link>\n        } else {\n            return <Link to={`/record/${foreignViewIndex}/${record[column.name]}`}>{record[column.name]}</Link>\n        }\n    } else if (column.showAsPicture) {\n        const imageUrl = column.baseUrl + record[column.pathField];\n        return record[column.pathField] ? (\n            <a href={imageUrl} target='_blank'>\n                <img src={imageUrl} style={{ width: onTable ? 60 : 300, height: onTable ? 30 : 150, objectFit: \"contain\" }} />\n            </a>\n        ) : null\n    } else if (column.formatValue) {\n        return <div dangerouslySetInnerHTML={{ __html: record[`__formatValue-${column.__id__}__`] }} />\n    } else if (column.formattedValue) {\n        return <div>{evalExpression(column.formattedValue, record)}</div>\n    } else if (column.action) {\n        if (column.actionDisplayCondition) {\n            let isDisplaying = evalExpression(column.actionDisplayCondition, record)\n            if (!isDisplaying)\n                return \"\";\n        }\n        var data = JSON.parse(JSON.stringify(column.data));\n        for (var key in data) {\n            data[key] = evalExpression(data[key], record)\n        }\n        return (\n            <div class='actionButton' data-route='\" + column.route + \"' data-data='\" + JSON.stringify(data) + \"'>{column.action}</div>\n        )\n    } else if (column.dataType === \"tinyint\") {\n        return <div>{record[column.name] === 1 ? \"Oui\" : \"Non\"}</div>\n    } else if (column.dataType === \"color\") {\n        return <div class='colorPreview' style={{ backgroundColor: record[column.name] }}></div>\n    } else if (column.dataType === \"richText\" || column.dataType === \"betterRichText\") {\n        return <div dangerouslySetInnerHTML={{ __html: record[column.htmlField] }} />\n    } else if (column.dataType === \"select\" && column.options && column.options.constructor == Object) {\n        return <div>{column.options[record[column.name]]}</div>\n    } else {\n        return <div>{record[column.name]}</div>\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}