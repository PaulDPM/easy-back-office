{"ast":null,"code":"import _slicedToArray from\"/home/runner/work/galadmin/galadmin/src/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";export default(function(_ref){var view=_ref.view,viewIndex=_ref.viewIndex,subviewIndex=_ref.subviewIndex,currentFilters=_ref.currentFilters,orderBy=_ref.orderBy,isDesc=_ref.isDesc,query=_ref.query;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isDownloading=_useState2[0],setIsDownloading=_useState2[1];var downloadRecords=function downloadRecords(){setIsDownloading(true);axios.post(\"/recordsExport\",{viewIndex:viewIndex,subviewIndex:subviewIndex,filters:currentFilters.map(function(x){return x.query;}),orderBy:orderBy,isDesc:isDesc,query:query}).then(function(response){setIsDownloading(false);window.download(response.data.content,view.label+\".csv\");});};return/*#__PURE__*/_jsx(\"div\",{class:\"downloadButton\",onClick:downloadRecords,children:/*#__PURE__*/_jsx(\"i\",{class:\"fa \".concat(!isDownloading?\"fa-cloud-download\":\"fa-spin fa-circle-notch\")})});});","map":{"version":3,"names":["useState","axios","jsx","_jsx","_ref","view","viewIndex","subviewIndex","currentFilters","orderBy","isDesc","query","_useState","_useState2","_slicedToArray","isDownloading","setIsDownloading","downloadRecords","post","filters","map","x","then","response","window","download","data","content","label","class","onClick","children","concat"],"sources":["/home/runner/work/galadmin/galadmin/src/front/src/components/DownloadButton.js"],"sourcesContent":["\nimport { useState } from \"react\"\nimport axios from \"axios\";\n\nexport default ({ view, viewIndex, subviewIndex, currentFilters, orderBy, isDesc, query }) => {\n    const [isDownloading, setIsDownloading] = useState(false)\n\n    const downloadRecords = () => {\n        setIsDownloading(true)\n        axios.post(\"/recordsExport\", {\n            viewIndex,\n            subviewIndex,\n            filters: currentFilters.map(function (x) {\n                return x.query\n            }),\n            orderBy,\n            isDesc,\n            query\n        }).then((response) => {\n            setIsDownloading(false)\n            window.download(response.data.content, view.label + \".csv\");\n        })\n    }\n\n    return (\n        <div class=\"downloadButton\" onClick={downloadRecords}>\n            <i class={`fa ${!isDownloading ? \"fa-cloud-download\" : \"fa-spin fa-circle-notch\"}`}></i>\n        </div>\n    )\n}"],"mappings":"mIACA,OAASA,QAAQ,KAAQ,OAAO,CAChC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,eAAe,SAAAC,IAAA,CAA+E,IAA5E,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,SAAS,CAAAF,IAAA,CAATE,SAAS,CAAEC,YAAY,CAAAH,IAAA,CAAZG,YAAY,CAAEC,cAAc,CAAAJ,IAAA,CAAdI,cAAc,CAAEC,OAAO,CAAAL,IAAA,CAAPK,OAAO,CAAEC,MAAM,CAAAN,IAAA,CAANM,MAAM,CAAEC,KAAK,CAAAP,IAAA,CAALO,KAAK,CACnF,IAAAC,SAAA,CAA0CZ,QAAQ,CAAC,KAAK,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAlDG,aAAa,CAAAF,UAAA,IAAEG,gBAAgB,CAAAH,UAAA,IAEtC,GAAM,CAAAI,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAA,CAAS,CAC1BD,gBAAgB,CAAC,IAAI,CAAC,CACtBf,KAAK,CAACiB,IAAI,CAAC,gBAAgB,CAAE,CACzBZ,SAAS,CAATA,SAAS,CACTC,YAAY,CAAZA,YAAY,CACZY,OAAO,CAAEX,cAAc,CAACY,GAAG,CAAC,SAAUC,CAAC,CAAE,CACrC,MAAO,CAAAA,CAAC,CAACV,KAAK,CAClB,CAAC,CAAC,CACFF,OAAO,CAAPA,OAAO,CACPC,MAAM,CAANA,MAAM,CACNC,KAAK,CAALA,KACJ,CAAC,CAAC,CAACW,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClBP,gBAAgB,CAAC,KAAK,CAAC,CACvBQ,MAAM,CAACC,QAAQ,CAACF,QAAQ,CAACG,IAAI,CAACC,OAAO,CAAEtB,IAAI,CAACuB,KAAK,CAAG,MAAM,CAAC,CAC/D,CAAC,CAAC,CACN,CAAC,CAED,mBACIzB,IAAA,QAAK0B,KAAK,CAAC,gBAAgB,CAACC,OAAO,CAAEb,eAAgB,CAAAc,QAAA,cACjD5B,IAAA,MAAG0B,KAAK,OAAAG,MAAA,CAAQ,CAACjB,aAAa,CAAG,mBAAmB,CAAG,yBAAyB,CAAG,CAAI,CAAC,CACvF,CAAC,CAEd,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}