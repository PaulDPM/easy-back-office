{"ast":null,"code":"import _objectSpread from\"/home/runner/work/galadmin/galadmin/src/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/runner/work/galadmin/galadmin/src/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectWithoutProperties from\"/home/runner/work/galadmin/galadmin/src/front/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _asyncToGenerator from\"/home/runner/work/galadmin/galadmin/src/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _excluded=[\"componentPath\",\"children\"];import React,{useMemo,Suspense}from'react';import _axios from\"axios\";import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";var packages={\"react\":function react(){return{exports:React};},\"axios\":function axios(){return{exports:_axios};},\"styled-components\":function styledComponents(){return{exports:styled};}};function getParsedModule(code,moduleName,packages){var _this=Object.create(packages);function require(name){if(!(name in _this)&&moduleName===name){var module={exports:{}};_this[name]=function(){return module;};var wrapper=Function(\"require, exports, module\",code);wrapper(require,module.exports,module);}else if(!(name in _this)){throw\"Module '\".concat(name,\"' not found\");}return _this[name]().exports;}return require(moduleName);}function fetchComponent(_x){return _fetchComponent.apply(this,arguments);}function _fetchComponent(){_fetchComponent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(componentPath){var response,text;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _axios.get(\"/customComponent\",{params:{componentPath:componentPath}});case 3:response=_context2.sent;text=response.data;return _context2.abrupt(\"return\",{default:getParsedModule(text,\"__moduleName__\",packages)});case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);return _context2.abrupt(\"return\",{default:function _default(){return/*#__PURE__*/_jsx(\"div\",{children:\"Erreur de rendu\"});}});case 12:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return _fetchComponent.apply(this,arguments);}var CustomComponent=function CustomComponent(_ref){var componentPath=_ref.componentPath,children=_ref.children,props=_objectWithoutProperties(_ref,_excluded);var Component=useMemo(function(){return/*#__PURE__*/React.lazy(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",fetchComponent(componentPath));case 1:case\"end\":return _context.stop();}},_callee);})));},[componentPath]);return/*#__PURE__*/_jsx(Suspense,{fallback:null,children:/*#__PURE__*/_jsx(Component,_objectSpread(_objectSpread({},props),{},{children:children}))});};export default/*#__PURE__*/React.memo(CustomComponent);","map":{"version":3,"names":["React","useMemo","Suspense","axios","styled","jsx","_jsx","packages","react","exports","styledComponents","getParsedModule","code","moduleName","_this","Object","create","require","name","module","wrapper","Function","concat","fetchComponent","_x","_fetchComponent","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","componentPath","response","text","wrap","_callee2$","_context2","prev","next","get","params","sent","data","abrupt","default","t0","console","error","_default","children","stop","CustomComponent","_ref","props","_objectWithoutProperties","_excluded","Component","lazy","_callee","_callee$","_context","fallback","_objectSpread","memo"],"sources":["/home/runner/work/galadmin/galadmin/src/front/src/components/CustomComponent.js"],"sourcesContent":["import React, { useMemo, Suspense } from 'react';\nimport axios from \"axios\";\nimport styled from 'styled-components'\n\nconst packages = {\n    \"react\": () => ({ exports: React }),\n    \"axios\": () => ({ exports: axios }),\n    \"styled-components\": () => ({ exports: styled }),\n}\n\nfunction getParsedModule(code, moduleName, packages) {\n    const _this = Object.create(packages);\n    function require(name) {\n        if (!(name in _this) && moduleName === name) {\n            let module = { exports: {} };\n            _this[name] = () => module;\n            let wrapper = Function(\"require, exports, module\", code);\n            wrapper(require, module.exports, module);\n        } else if (!(name in _this)) {\n            throw `Module '${name}' not found`\n        }\n        return (_this[name]()).exports;\n    }\n\n    return require(moduleName);\n}\n\n\nasync function fetchComponent(componentPath) {\n    try {\n        const response = await axios.get(`/customComponent`, {\n            params: {\n                componentPath\n            }\n        })\n        const text = response.data\n        return { default: getParsedModule(text, \"__moduleName__\", packages) };\n    } catch (error) {\n        console.error(error)\n        return { default() { return <div>Erreur de rendu</div> } }\n    }\n\n}\n\nconst CustomComponent = ({ componentPath, children, ...props }) => {\n    const Component = useMemo(() => {\n        return React.lazy(async () => fetchComponent(componentPath))\n    }, [componentPath]);\n\n    return (\n        <Suspense fallback={null}>\n            <Component {...props}>{children}</Component>\n        </Suspense>\n    )\n};\n\nexport default React.memo(CustomComponent);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}